"use strict";(self["webpackChunkta404_ui_cli"]=self["webpackChunkta404_ui_cli"]||[]).push([[7600],{94684:function(e,t,a){a.r(t),a.d(t,{default:function(){return o}});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ta-button",{on:{click:e.getPage}},[e._v("获取还原页面")]),a("ta-modal",{attrs:{title:"Basic Modal",height:"500px",width:"50%",destroyOnClose:!0},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("div",{staticStyle:{height:"100%"}},[a("iframe",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.src,frameborder:"0"}})])])],1)},r=[],i=a(83999),s={components:{},mixins:[i.Z],data:function(){return{src:"",visible:!1}},methods:{getPage:function(){var e=this,t=localStorage.pageId;this.visible=!0,this.getRePageUrl(t).then((function(t){e.src=t}))}}},u=s,c=a(1001),l=(0,c.Z)(u,n,r,!1,null,null,null),o=l.exports},83999:function(e,t,a){var n=a(95082),r=a(50124),i=a(3336),s=a(48534),u=a(3032),c={mounted:function(){var e=this,t=TaUtils.getNowPageParam(),a=t.rePageId;a&&this.Base.submit(null,{url:"review/getPageData",data:{pageId:a}}).then((function(t){e.setRePageData(JSON.parse(t.data.data))}))},methods:{saveRePageData:function(){var e=this;return(0,s.Z)((0,r.Z)().mark((function t(){var a,n,s,u;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="",n=e.$data||{},s={},u=Object.keys(e).filter((function(t){return!("_renderProxy"===t||!e[t]||"object"!==(0,i.Z)(e[t])||!e[t].getFieldsMomentValue)})),u.map((function(t){s[t]=e[t].getFieldsMomentValue()})),t.next=7,e.Base.submit(null,{url:"/review/savePage",data:{data:JSON.stringify({reData:n,reForm:s})}}).then((function(t){a=t.data.pageId,e.$message.success("保存成功")})).catch((function(t){e.message.error("保存失败")}));case 7:return t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})))()},setRePageData:function(e){var t=this,a=e.reData,r=e.reForm;Object.keys(a).map((function(e){t[e]=a[e]})),Object.keys(r).map((function(e){t[e].setFieldsMomentValue((0,n.Z)({},r[e]))}))},getRePageUrl:function(e){var t=this;return(0,s.Z)((0,r.Z)().mark((function a(){var n;return(0,r.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n="",a.next=3,t.Base.submit(null,{url:"review/getPageUrl",data:{pageId:e}}).then((function(t){n=t.data.frontUrl,n.indexOf("?")>-1?n+="&rePageId="+e:n+="?rePageId="+e}));case 3:return a.abrupt("return",n);case 4:case"end":return a.stop()}}),a)})))()}}};u["default"].prototype.setDisabled=function(e){e.disabled=!0},u["default"].mixin({mounted:function(){this.setDisabled&&TaUtils.getNowPageParam()&&TaUtils.getNowPageParam().rePageId&&this.setDisabled(this)}}),t.Z=c}}]);